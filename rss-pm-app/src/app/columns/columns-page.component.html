<ng-container *ngIf="columns$ | async as columns">

    <div cdkDropList
         cdkDropListOrientation="horizontal"
         [cdkDropListData]="columns"
         (cdkDropListDropped)="dropColumn($event)"
         class="columns">

      <div cdkDrag *ngFor="let column of columns | columnOrderSorting; trackBy: columnTrackByFn" class="column">
        <div class="column__header">
          <app-column-title-input [column]="column"></app-column-title-input>
          <span class="icon" title="{{'columns.move' | translate}}">â‡”</span>
          <mat-icon (click)="onDeleteColumn(column.id)" class="icon" title="{{'columns.delete' | translate}}">delete</mat-icon>
        </div>

          <app-task
            cdkDropList
            [cdkDropListData]="column.tasks"
            [tasks]="column.tasks"
            [cdkDropListConnectedTo]="(connectedLists$ | async)!"
            (cdkDropListDropped)="dropTask($event, column.id)"
            id="{{column.id}}"
            class="all-tasks">
          </app-task>


        <button mat-stroked-button color="primary" class="add-task-btn" (click)="createTaskPopup(column.id)">
          <mat-icon>add</mat-icon>
          {{'tasks.add-task' | translate}}
        </button>
      </div>
    </div>
</ng-container>

<button mat-stroked-button (click)="createColumnPopup()" class="create-column-btn">
  <mat-icon>add</mat-icon>
  {{'columns.add-column' | translate}}
</button>
