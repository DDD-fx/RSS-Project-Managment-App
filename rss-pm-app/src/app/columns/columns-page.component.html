<ng-container *ngIf="columns$ | async as columns">

    <div cdkDropList
         cdkDropListOrientation="horizontal"
         [cdkDropListData]="columns"
         (cdkDropListDropped)="dropColumn($event)"
         class="columns">
      <div cdkDrag *ngFor="let column of columns | columnOrderSorting" class="column">
        <div class="column__header">
          <div class="column__title" *ngIf="showColumnTitle" [attr.data-after]="'tasks.edit-after' | translate" (click)="showColumnTitle = !showColumnTitle">{{column.title}}</div>
          <input class="column__title--input" *ngIf="!showColumnTitle" type="text" (blur)="onTitleBlur(column.id)">
          <mat-icon (click)="onDeleteColumn(column.id)" title="Delete">delete</mat-icon>
        </div>

          <app-task
            cdkDropList
            [cdkDropListData]="column.tasks"
            [tasks]="column.tasks"
            [cdkDropListConnectedTo]="(connectedLists$ | async)!"
            (cdkDropListDropped)="dropTask($event, column.id)"
            id="{{column.id}}">
          </app-task>

        <button mat-stroked-button color="primary" class="add-task-btn" (click)="createTaskPopup(column.id)">
          <mat-icon>add</mat-icon>
          {{'tasks.add-task' | translate}}
        </button>
      </div>
    </div>
</ng-container>

<button mat-stroked-button (click)="createColumnPopup()" class="create-column-btn">
  <mat-icon>add</mat-icon>
  {{'columns.add-column' | translate}}
</button>
